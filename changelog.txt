========================================================
MIVON HTML EDITOR ‚Äî CHANGELOG
========================================================


------------------------------------------
Version 2.5.2 ‚Äì November 18, 2025
------------------------------------------

NEW FEATURES:
* Added automatic Special Widgets discovery (reads any folder with widget.json under /special-widgets/).
* New universal shortcode: [mivon_widget slug=‚Äù‚Ä¶‚Äù]
* Auto-generated admin list with name, description, shortcode, and preview link.

IMPROVEMENTS:
* Special Widgets now load only their own CSS/JS ‚Äî no conflicts with template sets.
* Cleaner internal system: removed old hardcoded slider widget.
* Fully modular widget architecture (drop a folder ‚Üí widget appears).

TECHNICAL:
* New registry function mivon_he_get_special_widgets_registry().
* New shortcode handler mivon_he_special_widget_shortcode().
* Auto path-rewriting and safe enqueue for widget assets.

NOTES:
* Feature is stable but not the focus for ongoing development ‚Äî kept mainly for flexibility.
* Plugin works the same if Special Widgets are not used.

COMPATIBILITY:
* Fully backward compatible with all versions up to 2.5.1.

------------------------------------------
Version 2.5.1 - November 17, 2025
------------------------------------------
NEW FEATURES:
* Manifest vs Loader toggle - choose asset loading method per template set
* Special Widgets system for reusable components
* Slider V1 widget with shortcode [mivon_slider_v1]
* Theme Manager toggle for Loader (Fast) vs Manifest per template set
* Special Widgets admin page in plugin menu

BUG FIXES:
* Fixed slider JavaScript errors (TypeError: Cannot set properties 'transition' of undefined)
* Fixed performance issues - heavy themes can now use faster Loader instead of Manifest
* Fixed missing CSS helper classes for slider widget (.d-flex, .container, etc.)

IMPROVEMENTS:
* Removed jQuery dependency from slider (now pure vanilla JS)
* Conditional asset loading for special widgets (only loads when shortcode used)
* Conflict detection prevents double-loading of Bootstrap, Swiper, FontAwesome
* Dynamic path resolution (works even if plugin renamed)
* Safety checks and defensive programming in JavaScript
* Better performance for heavy themes (Mivon, Lezar, Bfolio, Redox)

TECHNICAL:
* Added MIVON_HE_OPT_USE_MANIFEST option for per-set manifest preference
* Enhanced mivon_he_enqueue_assets_for_set() with toggle logic
* New function mivon_enqueue_slider_v1_assets() for conditional widget loading
* New shortcode mivon_slider_v1 for portfolio slider
* Updated slider-only.js to vanilla JavaScript with safety checks
* Added CSS helper classes to slider-only.css

BACKWARD COMPATIBILITY:
* Fully backward compatible with v2.5.0
* Existing templates work without changes
* Default behavior: uses Loader (like pre-2.5.0)
* Old manifest.json files still work if Manifest mode selected


------------------------------------------
Version 2.5.0 ‚Äì Manifest System & Asset Optimization
------------------------------------------
Release Date: November 17, 2025

üéØ MAJOR NEW FEATURES:
‚Ä¢ Introduced manifest.json system for advanced asset management
‚Ä¢ Per-template-set asset configuration (global + per-template control)
‚Ä¢ Smart asset loading - only load CSS/JS when templates are actually used
‚Ä¢ Custom handle prefixes per template set for better organization
‚Ä¢ Flexible asset structure supporting complex template libraries

üîß IMPROVEMENTS:
‚Ä¢ Massive performance boost - eliminated unnecessary asset loading
‚Ä¢ Better memory usage for sites with multiple template packs
‚Ä¢ Cleaner asset organization and conflict prevention
‚Ä¢ Enhanced code structure and maintainability
‚Ä¢ Improved asset discovery and validation

‚úÖ FIXES:
‚Ä¢ Fixed asset conflicts between different template sets
‚Ä¢ Fixed all CSS/JS loading on every page (now conditional)
‚Ä¢ Fixed handle naming conflicts in multi-set environments
‚Ä¢ Fixed asset path resolution issues
‚Ä¢ Fixed memory overhead from loading unused assets

üìö TECHNICAL DETAILS:
‚Ä¢ New function: mivon_he_get_all_manifests() - discovers all manifest files
‚Ä¢ Enhanced: mivon_he_enqueue_assets_for_set() - manifest-first loading
‚Ä¢ Backward compatible: old asset loading (assets/css/*.css) still works
‚Ä¢ Manifest structure supports both "global" and per-template assets
‚Ä¢ Automatic handle generation with MD5 for uniqueness

üìñ MANIFEST STRUCTURE:
{
  "handle_prefix": "mivon-lezar",
  "css": ["css/bootstrap.min.css", "css/style.css"],
  "js": ["js/jquery.min.js", "js/main.js"]
}

üîÑ MIGRATION:
‚Ä¢ Existing templates work without changes (fallback system active)
‚Ä¢ Add manifest.json to template folders for optimization
‚Ä¢ See documentation for manifest examples


------------------------------------------
Version 2.4.0 ‚Äì Live Editor Pro Upgrade
------------------------------------------
‚Ä¢ Major Live Editor layout overhaul ‚Äì now full-width, responsive, and expanded workspace  
‚Ä¢ Added always-visible Keyboard Shortcuts Panel (new UI section)  
  - Cmd/Ctrl + S ‚Üí Save  
  - Cmd/Ctrl + P ‚Üí Open preview  
  - Cmd/Ctrl + 1 ‚Üí Desktop preview  
  - Cmd/Ctrl + 2 ‚Üí Tablet preview  
  - Cmd/Ctrl + 3 ‚Üí Mobile preview  
‚Ä¢ New ‚ÄúOpen Preview‚Äù button next to Save/Restore  
‚Ä¢ Improved preview iframe sizing + instant resizing UX  
‚Ä¢ Improved drag resizer behavior (smoother & more accurate)  
‚Ä¢ Fixed layout issues where buttons drifted to wrong position  
‚Ä¢ Cleaned and polished toolbar design  
‚Ä¢ Clean UI spacing, consistent card layout, improved admin readability  
‚Ä¢ Improved JS structure (sections, naming, handling)  
‚Ä¢ Improved safety checks for preview iframe loading  
‚Ä¢ Many micro UI enhancements for a more professional editor feel  

------------------------------------------
Version 2.3.0 ‚Äì Special Widgets System + Slider V1
------------------------------------------
‚Ä¢ Introduced ‚ÄúSpecial Widgets‚Äù system + new admin submenu  
‚Ä¢ Added automatic shortcode generator for special widgets  
‚Ä¢ Integrated Slider V1 (Redox Hero Slider) into plugin  
‚Ä¢ Added isolated asset loader for slider-v1:  
  - Swiper JS / CSS  
  - Bootstrap (if included in widget folder)  
  - FontAwesome  
  - slider-only.js / slider-only.css  
‚Ä¢ Ensured widget assets do not conflict with theme templates  
‚Ä¢ Added shortcode: [mivon_slider_v1]  
‚Ä¢ Added preview button for slider widget in admin  
‚Ä¢ Improved shortcode scanning logic for nested templates  

------------------------------------------
Version 2.2.3 ‚Äì Live Preview Engine Upgrade
------------------------------------------
‚Ä¢ Added real-time LIVE Preview with AJAX debouncing  
‚Ä¢ Added caching-bypass using _rand parameter on Save  
‚Ä¢ Enhanced live preview rendering (document.write fix)  
‚Ä¢ Improved stripping of <html>, <head>, <body> from preview  
‚Ä¢ More reliable rewrite of asset URLs inside preview  
‚Ä¢ Fix: preview sometimes loaded old content due to browser caching  

------------------------------------------
Version 2.2.0 ‚Äì Multi-Set Shortcode Registration
------------------------------------------
‚Ä¢ Each template gets an automatic shortcode based on:  
  - active set  
  - filename  
‚Ä¢ Improved naming convention:  
  - mivon-templates ‚Üí [mivon-slug]  
  - other-templates ‚Üí [mivon-setname-slug]  
‚Ä¢ Shortcodes now auto-update when template renamed  
‚Ä¢ Do_shortcode applied inside templates (nested shortcodes enabled)  
‚Ä¢ Fix: duplicate shortcode registration removed  
‚Ä¢ Fix: inactive sets no longer produce shortcodes  

------------------------------------------
Version 2.1.5 ‚Äì Theme Manager + Multi-Set Engine
------------------------------------------
‚Ä¢ Added Theme Manager (toggle system) in admin  
‚Ä¢ You can now activate/deactivate template sets  
‚Ä¢ Only active sets are visible in:  
  - Live Editor  
  - Shortcodes page  
  - Rendering system  
‚Ä¢ Improved default theme auto-detection  
‚Ä¢ Added safety fallback when active sets missing  
‚Ä¢ Fix: editor not loading templates from deactivated theme  

------------------------------------------
Version 2.1.4 ‚Äì Template Discovery Improvements
------------------------------------------
‚Ä¢ Auto-detection of all folders ending in "-templates" or "-templetes"  
‚Ä¢ Improved sorting of sets alphabetically  
‚Ä¢ Auto-register empty mivon-templates folder for backward compatibility  
‚Ä¢ DirectoryIterator cleanup + efficient looping  

------------------------------------------
Version 2.1.3 ‚Äì Asset Rewrite Engine
------------------------------------------
‚Ä¢ Automatic rewriting of:  
  - src="assets/..."  
  - href="assets/..."  
  - data-background="assets/..."  
‚Ä¢ Added optional ?ver= timestamp for cache-busting  
‚Ä¢ Fixed relative paths not working in nested templates  
‚Ä¢ Prevents broken images after importing templates  

------------------------------------------
Version 2.1.2 ‚Äì Admin UI Enhancements
------------------------------------------
‚Ä¢ Re-styled Shortcodes grid with thumbnails  
‚Ä¢ Added ‚ÄúCopy shortcode‚Äù button  
‚Ä¢ Improved layout spacing and alignment  
‚Ä¢ Added iframe preview for each template  
‚Ä¢ Added modern dashboard statistics boxes  

------------------------------------------
Version 2.1.1.0 ‚Äì Previous Stable Version
------------------------------------------
‚Ä¢ Initial Live Editor  
‚Ä¢ Shortcode generator  
‚Ä¢ Basic admin UI  
‚Ä¢ Core template rendering  
‚Ä¢ Basic asset rewriting  
‚Ä¢ Version before all major upgrades above  


2.1.1 ‚Äî November 2025
---------------------
‚Ä¢ FIXED ‚Äî Live Editor "Save" button not working (missing admin.js enqueue).
‚Ä¢ FIXED ‚Äî Admin layout breaking on installations where admin.css could not load.
‚Ä¢ FIXED ‚Äî Preview iframe not refreshing after updates.
‚Ä¢ FIXED ‚Äî Localize-script executed before script enqueue (now corrected).
‚Ä¢ ADDED ‚Äî Stable default theme resolver.
‚Ä¢ ADDED ‚Äî Clean structured enqueue flow for admin assets.
‚Ä¢ IMPROVED ‚Äî Safety checks for missing template sets.
‚Ä¢ CLEANUP ‚Äî Removed dead code, improved consistency.

2.1.0 V2
-----
‚Ä¢ Added Theme Manager (toggle active template sets).
‚Ä¢ Active-only shortcodes (big improvement).
‚Ä¢ Safer defaults and better template detection.
‚Ä¢ Multi-set foundations.

2.1.x
-----
‚Ä¢ Multiple template set support.
‚Ä¢ Overhauled rendering engine.
‚Ä¢ Improved shortcode naming.

= 2.1.0 =
Release Date: 2025-11-12
- Major Feature: Added full **Theme Manager** with toggle switches.
- Added new option `mivon_he_enabled_themes` to store enabled/disabled template sets.
- Shortcodes are now registered only for **enabled themes**.
- Front-end rendering respects toggles ‚Äî disabled themes won‚Äôt render shortcodes.
- ‚ÄúSettings‚Äù page replaced by the new **Theme Manager** interface with save form.
- Activation hook initializes default state (enables only mivon-templates on first install).
- Improved asset rewrite system (better detection of absolute `/assets/` paths).
- Improved directory scanning: supports both ‚Äú-templates‚Äù and ‚Äú-templetes‚Äù suffixes.
- Added backward compatibility helpers (`mivon_he_asset()`, `mivon_bfolio_asset()`, `mivon_asset()`).
- Codebase cleanup and reorganization for readability and maintainability.


= 2.0.8 (November 2025) =
* FIXED: Live Preview now properly refreshes without breaking layout or losing CSS/JS.
* FIXED: Correct asset rewriting for all theme sets (mivon-templates, bfolio-rtl-templetes, and future ones).
* FIXED: Resizer in Live Editor is smoother and more precise.
* IMPROVED: Editor performance while typing (debounced preview refresh).
* IMPROVED: Cross-theme shortcode system ‚Äì fully compatible with multiple sets.
* ADDED: Support for unlimited theme folders ending with ‚Äú-templates‚Äù.
* ADDED: Automatic detection of sets (Mivon, Bfolio, etc.) across the plugin.
* CLEANUP: Refactored AJAX handling to prevent duplicate requests.
* STABLE: Tested compatibility on WordPress 6.7+ and PHP 8.2.

= 2.0.7 =
* Added support for multiple template sets (any folder ending with "-templates" in the plugin root).
* Kept backward compatibility for existing shortcodes from "mivon-templates".
* New shortcode naming for extra sets (example: [mivon-bfolio-home]).
* Live Editor now lets you choose both the template set and the file.
* Admin dashboard now shows template counts per set.
* AJAX endpoints now accept an optional "set" parameter but still auto-detect the file if "set" is missing.
* Improved asset rewriting to respect each set's own /assets/ folder.


== 2.0.6 (November 2025) ==
* Added multi-theme support (mivon-templates + bfolio-rtl-templetes)
* Fixed: shortcode output showing as text instead of rendering HTML
* Fixed: live editor preview not updating after save
* Fixed: full HTML restored for live preview iframe
* Improved: automatic asset path rewriting per theme
* Improved: performance and safety for file operations
* Improved: UI sync for Save / Restore buttons
* Added: support for custom shortcode prefixes per theme (e.g. [mivon-bfolio-home])
* Refactored: AJAX structure to handle theme source dynamically
* Cleaned: CSS layout consistency and admin padding fixes

== 2.0.5 ==
* Added support for second HTML shell (preview=true mode)
* Optimized admin CSS / JS
* Fixed editor iframe resize logic
* Stability improvements

== 2.0.4 ==
* Rebuilt plugin structure for stable live editing
* Restored shortcode box styling
* Added changelog & settings subpages

== 2.0.3 ==
* Introduced full live HTML editor (with preview + restore)
* Added admin CSS/JS assets
* Added shortcode grid view with iframe previews

== 2.0.2 ==
* Initial integration of ‚Äúmivon-templates‚Äù HTML bundle
* Automatic shortcode registration for each HTML template

== 2.0.1 ==
* Minor bug fixes and UI layout improvements

== 2.0.0 ==
* Initial public release of Mivon HTML Editor plugin
* Core: shortcode generator + basic dashboard
